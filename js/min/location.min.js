var location_api="api/location",article_api="api/article";$(function(){$locationList=$("#locationList");var e=$("#article_id").val(),t=new Article(e);$("#findLocation").keydown(function(a){if(console.log("Find location clicked! and KeyCode: "+a.keyCode),13==a.keyCode){$selected=$("#locationList .selected");var i=$selected.attr("data-district"),o=$selected.attr("data-amphur"),s=$selected.attr("data-province");console.log(e,i,o,s),t.editAddress(i,o,s)}else if(38==a.keyCode){var n=$(".selected");$("#locationList .location-items").removeClass("selected"),0==n.prev().length?n.siblings().last().addClass("selected"):n.prev().addClass("selected")}else if(40==a.keyCode){var n=$(".selected");$("#locationList .location-items").removeClass("selected"),0==n.next().length?n.siblings().first().addClass("selected"):n.next().addClass("selected")}}),$("#findLocation").on("input",function(){var e=$(this).val();return!e||e.length<=1?($("#locationList").html(""),!1):($.ajax({url:location_api,cache:!1,dataType:"json",type:"GET",data:{request:"find",keyword:e},error:function(e){console.log(e.responseText)}}).done(function(e){var t="";$.each(e.dataset,function(e,a){console.log(a.district_name+" "+a.amphur_name+" "+a.province_name),t+='<li class="location-items" data-district="'+a.district_id+'" data-amphur="'+a.amphur_id+'" data-province="'+a.province_id+'">'+(a.district_name?"ต."+a.district_name+" ":"")+(a.amphur_name?"อ."+a.amphur_name+" ":"")+(a.province_name?"จ."+a.province_name:"")+'<i class="fal fa-check"></i></li>'}),$("#locationList").html(t),$("#locationList").children(".location-items").first().addClass("selected")}),void 0)}),$("#locationList").on("click",".location-items",function(){var e=$(this).attr("data-district"),a=$(this).attr("data-amphur"),i=$(this).attr("data-province");t.editAddress(e,a,i)})});