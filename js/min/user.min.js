function requestVerify(){var e=$("#fullname").val(),a=$("#email").val(),r=$("#phone").val(),t=$("#bio").val();return t?($overlay.addClass("open"),$progressbar.fadeIn(300),$progressbar.width("0%"),$progressbar.animate({width:"70%"},500),$.get({url:api_user,timeout:1e4,cache:!1,dataType:"json",type:"POST",data:{request:"request_verify",fullname:e,email:a,phone:r,bio:t},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),location.reload()}),void 0):(alert(t),!1)}function login(){var e=$("#username").val(),a=$("#password").val(),r=$("#sign").val();return""==e?($("#username").focus(),!1):""==a?(alert("คุณยังไม่ได้กรอกรหัสผ่าน!"),$("#password").focus(),!1):($progressbar.fadeIn(300),$progressbar.width("0%"),$progressbar.animate({width:"70%"},500),$.get({url:api_user,timeout:1e4,cache:!1,dataType:"json",type:"POST",data:{request:"login",username:e,password:a,sign:r},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){if(console.log(e),1==e.state){$btnSubmit.addClass("loading"),$btnSubmit.html('กำลังเข้าระบบ<i class="fa fa-spinner fa-spin" aria-hidden="true"></i>'),$progressbar.animate({width:"100%"},500);var a=$("#redirect").val();setTimeout(function(){window.location=""!=a?"document/"+a:"index.php?login=success"},1e3)}else 0==e.state?($progressbar.animate({width:"0%"},500),alert("เข้าระบบไม่สำเร็จ กรุณาตรวจสอบอีกครั้ง!")):-1==e.state&&($progressbar.animate({width:"0%"},500),alert("คุณต้องรออีก 5 นาที เพื่อเข้าระบบใหม่!"))}).fail(function(){alert("ระบบทำงานผิดพลาด กรุณาลองใหม่อีกครั้ง!"),$progressbar.animate({width:"0%"},500),$("#password").focus(),$("#password").val("")}),void 0)}function register(){var e=$("#fullname").val(),a=$("#email").val(),r=$("#phone").val(),t=$("#password").val(),n=$("#sign").val();return""==e||""==r||""==a||""==t?!1:($progressbar.fadeIn(300),$progressbar.width("0%"),$progressbar.animate({width:"70%"},500),$.get({url:api_user,timeout:1e4,cache:!1,dataType:"json",type:"POST",data:{request:"register",fullname:e,phone:r,email:a,password:t,sign:n},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),$btnSubmit.addClass("loading"),$btnSubmit.html('กำลังลงทะเบียน<i class="fa fa-spinner fa-spin" aria-hidden="true"></i>'),$progressbar.animate({width:"100%"},500);var a=$("#redirect").val();setTimeout(function(){window.location=""!=a?"document/"+a:"profile/#success"},1e3)}).fail(function(){alert("ระบบทำงานผิดพลาด กรุณาลองใหม่อีกครั้ง!")}),void 0)}function loginProgress(e){var a=new XMLHttpRequest;return console.log(e,e.id,e.email),void 0===e.id||""==e.id?(location.reload(),!1):(a.open("POST","api/user.php",!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&200==a.status&&location.reload()},a.send("request=facebook_login&fb_id="+e.id+"&fb_fname="+e.first_name+"&fb_lname="+e.last_name+"&fb_email="+e.email+"&fb_link="+e.link+"&fb_verified="+e.verified+"&gender="+e.gender),void 0)}var api_user="api/user.php";$(document).ready(function(){$("#sign").val();$progressbar=$("#progressbar"),$btnSubmit=$("#btnSubmit"),$("#btnVerify").click(function(){requestVerify()})});