<?php 
$test ='<?xml version="1.0" encoding="windows-874"?> 
<ClaimRec System="OP" PayPlan="SS" Version="0.93">
<Header>
<HCODE>10000</HCODE>
<HNAME>โรงพยาบาล ตัวอย่าง </HNAME>
<DATETIME>2018-01-01T15:20:35</DATETIME>
<SESSNO>0001</SESSNO>
<RECCOUNT>1</RECCOUNT>
</Header>
<BILLTRAN>
01||2018-01-01T13:30:00|10000|201801010001||12345||704.50|0.00||A|1234567890111|นายสมมติ ทดสอบ |10000|80|704.50||0.00
</BILLTRAN>
<BillItems>
201801010001|2018-01-01|3|1110|104539  |Omeprazole 20mg |70.00|1.00|70.00|1.00|70.00|201801010002|OP1
201801010001|2018-01-01|3|1200|286107 |Clarithromycin 500 mg |14.00|13.00|182.00|13.00|182.00|201801010002|OP1
201801010001|2018-01-01|3|1300|241215|Amoxicillin 500 mg|30.00|1.75|52.50|1.75|52.50|201801010002|OP1
201801010001|2018-01-01|C|1000| |ค่าบริการผู้ป่วยนอก|1.00|100.00|100.00|100.00|100.00 | |OP1
201801010001|2018-01-01|I|1001| |ค่าธรรมเนียมแพทย์|1.00|300.00|300.00|300.00|300.00|201801010003|OP1
</BillItems>
</ClaimRec>';
$md = md5($test,true);
$checksum = hex2bin($md);
$md = base_convert($md, 16,2);

echo '<p>'.$checksum
.'</p>';
echo '<p>4451A7A7AD0B087C77197456523E85A4</p>';
?>